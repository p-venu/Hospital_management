<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Description | Dr. John Smith | NBKR Hospital</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: #fbfcfd;
            position: relative;
            overflow-x: hidden;
        }

        .dna-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .dna-bg::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: url('https://www.publicdomainpictures.net/pictures/300000/velka/dna-helix-1544039042r8S.jpg') repeat;
            background-size: 30%;
            opacity: 0.2;
            animation: dnaMove 15s linear infinite;
        }

        @keyframes dnaMove {
            0% { background-position: 0 0; }
            100% { background-position: 200% 200%; }
        }

        :root {
            --primary-blue: #1e40af;
            --secondary-blue: #3b82f6;
            --accent-blue: #5b9ef6;
            --highlight-gold: #d4a017;
            --tech-glow: #00ffff;
            --border-green: #22c55e;
            --border-blue: #3b82f6;
            --dark-green: #15803d;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes glow {
            0% { box-shadow: 0 0 5px var(--tech-glow); }
            50% { box-shadow: 0 0 20px var(--tech-glow); }
            100% { box-shadow: 0 0 5px var(--tech-glow); }
        }

        @keyframes borderPulse {
            0% { border-color: var(--highlight-gold); }
            50% { border-color: var(--secondary-blue); }
            100% { border-color: var(--highlight-gold); }
        }

        .animate-fade-in {
            animation: fadeInUp 0.8s ease-out forwards;
        }

        .report-card {
            border: 4px solid var(--highlight-gold);
            border-radius: 24px;
            background: linear-gradient(145deg, #a8c5e7, #e0f0ff);
            padding: 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            width: 794px; /* A4 width at 96dpi */
            min-height: 1123px; /* A4 height at 96dpi */
            margin: 2rem auto;
        }

        .report-card:hover {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.35);
            animation: glow 1.5s infinite, borderPulse 2s infinite;
        }

        .report-card h2, .report-card h3, .report-card h4 {
            color: var(--primary-blue);
            font-weight: bold;
        }

        .report-card p, .report-card li {
            font-size: 1.125rem;
            color: var(--primary-blue);
            margin-bottom: 0.75rem;
        }

        .report-card table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .report-card th, .report-card td {
            border: 2px solid var(--border-blue);
            padding: 0.75rem;
            text-align: left;
            font-size: 1.125rem;
        }

        .report-card th {
            background-color: var(--accent-blue);
            color: white;
            font-weight: bold;
        }

        .action-btn {
            background-color: var(--secondary-blue);
            color: white;
            padding: 0.75rem 2rem;
            font-size: 1.25rem;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
            font-weight: bold;
            border: none;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
            margin: 0.5rem;
        }

        .action-btn:hover {
            background-color: var(--primary-blue);
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }

        .footer-grid {
            display: grid;
            grid-template-areas:
                "contact departments"
                "connect .";
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .footer-contact { grid-area: contact; }
        .footer-departments { grid-area: departments; }
        .footer-connect { grid-area: connect; }

        .footer-section {
            text-align: left;
        }

        .footer-section h4 {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: var(--highlight-gold);
        }

        .footer-section p, .footer-section ul li {
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
        }

        .footer-section ul li a {
            color: white;
            transition: color 0.3s;
        }

        .footer-section ul li a:hover {
            color: var(--highlight-gold);
        }

        .social-icons {
            display: flex;
            gap: 1rem;
            margin-top: 0.5rem;
        }

        .footer-bottom {
            text-align: center;
            margin-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 1rem;
        }

        .hospital-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .hospital-header h2 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .hospital-header p {
            font-size: 1.125rem;
            color: var(--primary-blue);
        }

        .section-title {
            font-size: 1.5rem;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }

        @media print {
            @page {
                size: A4;
                margin: 0;
            }

            body {
                margin: 0;
                padding: 0;
            }

            .report-card {
                width: 8.27in; /* A4 width */
                min-height: 11.69in; /* A4 height */
                box-shadow: none;
                border: none;
                margin: 0;
                padding: 0.25in;
                page-break-after: always;
                transform: scale(0.95); /* Slightly scale down to fit */
                transform-origin: top left;
            }

            .action-btn, nav, footer, .dna-bg {
                display: none;
            }

            /* Match webpage font sizes */
            .report-card h2 {
                font-size: 2rem;
            }

            .report-card h3 {
                font-size: 1.875rem;
            }

            .report-card h4 {
                font-size: 1.5rem;
            }

            .report-card p, .report-card li, .report-card th, .report-card td {
                font-size: 1.125rem;
            }

            .hospital-header h2 {
                font-size: 2rem;
            }

            .section-title {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 768px) {
            .report-card {
                width: 100%;
                min-height: auto;
                padding: 1.5rem;
            }

            .footer-grid {
                grid-template-areas:
                    "contact"
                    "departments"
                    "connect";
                grid-template-columns: 1fr;
            }

            .action-btn {
                display: block;
                margin: 0.5rem auto;
            }
        }
    </style>
</head>
<body>
    <div class="dna-bg"></div>

    <!-- Navigation -->
    <nav class="bg-[var(--primary-blue)] text-white p-6 sticky top-0 z-50 shadow-2xl">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-4xl font-extrabold tracking-wide drop-shadow-md">NBKR Hospital</h1>
            <ul class="flex space-x-12 text-xl font-semibold">
                <li><a href="1index.html" class="hover:text-[var(--secondary-blue)] transition-colors duration-300">Home</a></li>
                <li><a href="2about_hospital_doctors.html" class="hover:text-[var(--secondary-blue)] transition-colors duration-300">About</a></li>
                <li><a href="3our_services.html" class="hover:text-[var(--secondary-blue)] transition-colors duration-300">Services</a></li>
                <li><a href="4appointments.html" class="hover:text-[var(--secondary-blue)] transition-colors duration-300">Appointment</a></li>
                <li><a href="5contact_us.html" class="hover:text-[var(--secondary-blue)] transition-colors duration-300">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Patient Description Section -->
    <section class="py-16 bg-transparent">
        <div class="container mx-auto px-6">
            <h3 class="text-4xl font-bold mb-8 text-[var(--secondary-blue)] text-center tracking-tight animate-fade-in">Patient Description</h3>
            <div id="patient-report" class="report-card animate-fade-in" style="animation-delay: 0.2s;">
                <div class="hospital-header">
                    <h2 class="text-2xl font-extrabold">🩺 Hospital Health Report — Department of Cardiology</h2>
                    <p>Hospital Name: NBKR Hospital</p>
                    <p>Address: 123 Health St, San Francisco, CA, USA</p>
                    <p>Contact No: +1 (555) 123-4567 | Email: contact@nbkrhospital.com</p>
                    <p>Website: www.nbkrhospital.com</p>
                </div>

                <h4 class="section-title">Patient Information</h4>
                <p><strong>Patient Name:</strong> <span id="patient-name">Loading...</span></p>
                <p><strong>Age:</strong> <span id="age">Loading...</span></p>
                <p><strong>Gender:</strong> <span id="gender">Loading...</span></p>
                <p><strong>Patient ID:</strong> <span id="patient-id">Loading...</span></p>
                <p><strong>Contact Number:</strong> <span id="patient-contact">Loading...</span></p>
                <p><strong>Date of Examination:</strong> <span id="date">Loading...</span></p>

                <h4 class="section-title">Medical Observations</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Result</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Blood Pressure</td>
                            <td id="blood-pressure">Loading...</td>
                        </tr>
                        <tr>
                            <td>Heart Rate</td>
                            <td id="heart-rate">Loading...</td>
                        </tr>
                        <tr>
                            <td>Oxygen Level (SpO₂)</td>
                            <td id="oxygen-level">Loading...</td>
                        </tr>
                        <tr>
                            <td>Temperature</td>
                            <td id="temperature">Loading...</td>
                        </tr>
                        <tr>
                            <td>Health Status</td>
                            <td id="health-status">Loading...</td>
                        </tr>
                    </tbody>
                </table>

                <h4 class="section-title">Diagnosis Summary</h4>
                <p id="diagnosis-notes" class="whitespace-pre-wrap">Loading...</p>

                <h4 class="section-title">Scan / Report Results</h4>
                <p id="scan-result">Loading...</p>

                <h4 class="section-title">Prescribed Medicines</h4>
                <p id="medicines" class="whitespace-pre-wrap">Loading...</p>

                <h4 class="section-title">Follow-Up Details</h4>
                <p><strong>Need to Visit Again:</strong> <span id="need-visit">Loading...</span></p>
                <p><strong>Next Visit Date:</strong> <span id="next-visit-date">Loading...</span></p>

                <h4 class="section-title">Doctor’s Certification</h4>
                <p>After examining the patient and reviewing all clinical observations, it is certified that the above report accurately represents the patient’s current cardiac condition.</p>
                <p><strong>Doctor’s Name:</strong> <span id="doctor-name">Loading...</span></p>
                <p><strong>Designation:</strong> Cardiologist</p>
                <p><strong>Registration No.:</strong> CRD789012</p>
                <p><strong>Signature:</strong> Dr. John Smith </p>
                <p><strong>Hospital Seal:</strong> </p>
                <!-- Text seal: copy this into your certificate HTML where you want the seal -->
                <div class="seal-wrap">
                <pre class="seal-ascii">
                ╔════════════════════════════════╗
                ║   ○ NBKR HOSPITAL ○            ║
                ║   Department of Cardiology     ║
                ║   Official Medical Seal        ║
                ╚════════════════════════════════╝
                </pre>
                </div>

                <style>
                /* Styling to ensure the box prints perfectly */
                .seal-wrap {
                display: inline-block;           /* keeps box size exact */
                margin: 12px;                    /* spacing from signature */
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
                }

                .seal-ascii {
                font-family: "Courier New", Courier, monospace; /* fixed-width */
                font-size: 14px;                 /* adjust for printed size */
                line-height: 1;                  /* important: exact line spacing */
                letter-spacing: 0;               /* avoid browser adjustments */
                margin: 0;
                padding: 6px 8px;                /* inner padding like a stamp */
                background: transparent;         /* or white */
                white-space: pre;                /* preserve exact spacing */
                display: block;
                border: none;                    /* optional: if you need outer border, add below */
                }

                /* Optional outer border to make a crisp printed box */
                .seal-wrap.with-border {
                border: 1px solid #000;
                padding: 6px;
                }
                </style>

            </div>
            <div class="text-center mt-6">
                <button class="action-btn" onclick="downloadReport()">Download</button>
                <button class="action-btn" onclick="printReport()">Print</button>
                <button class="action-btn" onclick="sendToPatient()">Send to Patient Contact Number</button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-[var(--primary-blue)] text-white py-12">
        <div class="footer-grid">
            <div class="footer-section footer-contact">
                <h4>Contact Us</h4>
                <p>Phone: +1 (555) 123-4567</p>
                <p>Email: contact@nbkrhospital.com</p>
                <p>Address: 123 Health St, San Francisco, CA, USA</p>
            </div>
            <div class="footer-section footer-departments">
                <h4>Explore Departments</h4>
                <ul>
                    <li><a href="neurology.html">Neurology</a></li>
                    <li><a href="orthopedics.html">Orthopedics</a></li>
                    <li><a href="pediatrics.html">Pediatrics</a></li>
                    <li><a href="oncology.html">Oncology</a></li>
                    <li><a href="gynecology.html">Gynecology</a></li>
                    <li><a href="gastroenterology.html">Gastroenterology</a></li>
                    <li><a href="dermatology.html">Dermatology</a></li>
                </ul>
            </div>
            <div class="footer-section footer-connect">
                <h4>Connect With Us</h4>
                <p><a href="https://nbkrhospital.com/app">Download Our App</a></p>
                <div class="social-icons">
                    <a href="https://facebook.com/nbkrhospital" title="Facebook"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"/></svg></a>
                    <a href="https://twitter.com/nbkrhospital" title="Twitter"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.58-2.46.69a4.3 4.3 0 001.88-2.38 8.6 8.6 0 01-2.72 1.05 4.28 4.28 0 00-7.29 3.9 12.14 12.14 0 01-8.82-4.47 4.28 4.28 0 001.33 5.71 4.27 4.27 0 01-1.94-.54v.05a4.28 4.28 0 003.44 4.2 4.28 4.28 0 01-1.93.07 4.28 4.28 0 004 2.98 8.58 8.58 0 01-5.33 1.84c-.34 0-.68-.02-1.02-.06A12.14 12.14 0 006.58 21c7.96 0 12.32-6.6 12.32-12.32 0-.19 0-.37-.01-.56A8.78 8.78 0 0022.46 6z"/></svg></a>
                    <a href="https://instagram.com/nbkrhospital" title="Instagram"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 2.633.326 3.608 1.301.975.975 1.24 2.242 1.301 3.608.058 1.266.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.062 1.366-.326 2.633-1.301 3.608-.975.975-2.242 1.24-3.608 1.301-1.266.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-1.366-.062-2.633-.326-3.608-1.301-.975-.975-1.24-2.242-1.301-3.608-.058-1.266-.07-1.646-.07-4.85s.012-3.584.07-4.85c.062-1.366.326-2.633 1.301-3.608.975-.975 2.242-1.24 3.608-1.301 1.266-.058 1.646-.07 4.85-.07zm0-2.163c-3.259 0-3.667.014-4.947.072-1.542.07-2.892.427-3.993 1.528-1.101 1.101-1.458 2.451-1.528 3.993-.058 1.28-.072 1.688-.072 4.947s.014 3.667.072 4.947c.07 1.542.427 2.892 1.528 3.993 1.101 1.101 2.451 1.458 3.993 1.528 1.28.058 1.688.072 4.947.072s3.667-.014 4.947-.072c1.542-.07 2.892-.427 3.993-1.528 1.101-1.101 1.458-2.451 1.528-3.993.058-1.28.072-1.688.072-4.947s-.014-3.667-.072-4.947c-.07-1.542-.427-2.892-1.528-3.993-1.101-1.101-2.451-1.458-3.993-1.528-1.28-.058-1.688-.072-4.947-.072z"/><path d="M12 6.865a5.135 5.135 0 100 10.27 5.135 5.135 0 000-10.27zm0 8.468a3.333 3.333 0 110-6.666 3.333 3.333 0 010 6.666zm5.339-9.87a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0z"/></svg></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 NBKR Hospital. All rights reserved. | Pioneering High-Tech Healthcare</p>
        </div>
    </footer>

    <script>
        // Get patient ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const patientId = urlParams.get('patientId');

        // Load patient data from localStorage
        function loadPatientData() {
            if (!patientId) {
                alert('No patient ID provided.');
                return;
            }
            const data = JSON.parse(localStorage.getItem(`patientData_${patientId}`));
            if (!data) {
                alert('No patient data found.');
                return;
            }

            // Update DOM with patient data
            document.getElementById('patient-name').textContent = data.patientName || 'Not Provided';
            document.getElementById('age').textContent = data.age || 'Not Provided';
            document.getElementById('gender').textContent = data.gender || 'Not Provided';
            document.getElementById('patient-id').textContent = data.patientId || 'Not Provided';
            document.getElementById('patient-contact').textContent = data.patientContact || 'Not Provided';
            document.getElementById('date').textContent = data.date || 'Not Provided';
            document.getElementById('blood-pressure').textContent = data.bloodPressure || 'Not Provided';
            document.getElementById('heart-rate').textContent = data.heartRate || 'Not Provided';
            document.getElementById('oxygen-level').textContent = data.oxygenLevel || 'Not Provided';
            document.getElementById('temperature').textContent = data.temperature || 'Not Provided';
            document.getElementById('health-status').textContent = data.healthStatus || 'Not Provided';
            document.getElementById('diagnosis-notes').textContent = data.diagnosisNotes || 'Not Provided';
            document.getElementById('scan-result').textContent = data.scanResult || 'Not Provided';
            document.getElementById('medicines').textContent = data.medicines || 'Not Provided';
            document.getElementById('need-visit').textContent = data.needVisit || 'Not Provided';
            document.getElementById('next-visit-date').textContent = data.nextVisitDate || 'Not Applicable';
            document.getElementById('doctor-name').textContent = data.doctorName || 'Not Provided';
        }

        // Download report as PDF
        function downloadReport() {
            const element = document.getElementById('patient-report');
            const opt = {
                margin: 0.1, // Minimal margin to maximize content area
                filename: `Patient_Report_${patientId || 'Unknown'}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { 
                    scale: 2, 
                    width: 794, // Match .report-card width
                    letterRendering: true, // Sharper text
                    useCORS: true 
                },
                jsPDF: { 
                    unit: 'in', 
                    format: [8.27, 11.69], // Precise A4 dimensions
                    orientation: 'portrait' 
                },
                pagebreak: { mode: ['avoid-all', 'css', 'legacy'] } // Prevent content splitting
            };
            html2pdf().from(element).set(opt).save();
        }

        // Print report
        function printReport() {
            window.print();
        }

        // Send to patient contact number (placeholder)
        function sendToPatient() {
            const contact = document.getElementById('patient-contact').textContent;
            const inputContact = prompt('Please enter the patient’s contact number:', contact !== 'Not Provided' ? contact : '');
            if (inputContact) {
                alert(`Report sent to ${inputContact} (simulated).`);
                // Actual SMS functionality requires a backend service
            } else {
                alert('No contact number provided.');
            }
        }

        // Initialize page
        window.onload = loadPatientData;
    </script>
</body>
</html>